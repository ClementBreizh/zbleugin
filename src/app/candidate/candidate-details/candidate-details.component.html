<ng-container *ngIf="candidate">
  <h2>{{ candidate.sexCandidate }} {{candidate.firstname}} {{candidate.lastname}}</h2>
  <p class="status">Statut actuel: {{ candidate.statusCandidate }}</p>
  <mat-card class="infos">
      <mat-grid-list cols="2" rowHeight="2:1">
          <mat-grid-tile>
            <mat-list>
              <mat-list-item class="address" >Adresse:</mat-list-item>
              <mat-list-item >{{candidate.address.street}}</mat-list-item>
              <mat-list-item >{{candidate.address.postalCode}} {{candidate.address.city}}</mat-list-item>
            </mat-list>
          </mat-grid-tile>
          <mat-grid-tile class="div-contact">
            <mat-list>
              <mat-list-item class="contact" >Contact:</mat-list-item>
              <mat-list-item >Tel mobile: {{candidate.homePhone}}</mat-list-item>
              <mat-list-item >Tel fixe: {{candidate.cellPhone}}</mat-list-item>
              <mat-list-item >Email: {{candidate.email}}</mat-list-item>
            </mat-list>
          </mat-grid-tile>
        </mat-grid-list>
  </mat-card>

  <mat-tab-group>
    <mat-tab label="Diplômes et matières maitrîsées">
      <mat-card class="detailsCard1">
        <h2>Ses diplômes</h2>
        <table>
          <tr>
            <th>Intitulé</th>
            <th>Niveau</th>
            <th>Date d'obtention</th>
            <th>Action</th>
          </tr>
          <tr *ngFor="let degree of candidate.degrees; index as index">
            <td>{{ degree.name }}</td>
            <td>{{ degree.level }}</td>
            <td>{{ degree.validationDate }}</td>
            <td>
              <a title="Supprimer le diplôme" (click)="onDeleteDegree(index)">
                <mat-icon svgIcon="delete" class="actions actionDelete"></mat-icon>
              </a>
            </td>
          </tr>
        </table>

          <mat-accordion>
            <mat-expansion-panel>
              <mat-expansion-panel-header>
                <mat-panel-title>
                  <mat-icon svgIcon="add"></mat-icon> Ajouter un diplôme
                </mat-panel-title>
                <mat-panel-description>
                  Cliquez pour ajouter
                </mat-panel-description>
              </mat-expansion-panel-header>

              <app-degree-form></app-degree-form>
            </mat-expansion-panel>
          </mat-accordion>
        <h2>Les matières maitrisées</h2>
        <ul>
          <li *ngFor="let matter of candidate.matters">{{ matter.name }}</li>
        </ul>
      </mat-card>
    </mat-tab>

    <mat-tab label="Session(s)">
        <h3>Ses sessions de formation</h3>
        <div *ngIf="actualSession; else noSession">
          <p>Sa dernière session est {{actualSession.name}}</p>
          <p>Elle se déroule du {{actualSession.startDate | date:'mediumDate' }} au {{actualSession.endDate | date:'mediumDate' }}</p>
          <mat-expansion-panel>
            <mat-expansion-panel-header>
              <mat-panel-title>
                Voir les autres sessions
              </mat-panel-title>
            </mat-expansion-panel-header>
            <ng-container *ngIf="this.candidate.sessions.length > 1">
              <p *ngFor="let session of this.candidate.sessions ">
                {{session.name}}
              </p>
            </ng-container>
          </mat-expansion-panel>
        </div>
        <ng-template #noSession>Aucune session actuellement</ng-template>
      </mat-tab>

    <mat-tab label="Rendez-vous">
      <mat-card class="rdv">
        <h2>Ses Rendez-vous:</h2>
        <table>
          <tr>
            <th>Date du rendez-vous</th>
            <th>Statut</th>
            <th>Type du rendez-vous</th>
            <th>Organisateur</th>
          </tr>
          <tr *ngFor="let appointment of candidate.appointments">
            <td>{{ appointment.appointmentDate}}</td>
            <td>{{ appointment.status }}</td>
            <td>{{ appointment.appointmentType }}</td>
            <td>{{ appointment.organizer.firstname }} {{ appointment.organizer.lastname }}</td>
          </tr>
        </table>
      </mat-card>
    </mat-tab>

    <mat-tab label="Tests">
      <h2>Tests réalisés</h2>
      <table>
        <tr>
          <th>Thème</th>
          <th>Score</th>
          <th>Date de validation</th>
        </tr>
        <tr *ngFor="let assessment of candidate.assessments">
          <td>{{ assessment.category }}</td>
          <td>{{ assessment.score }}</td>
          <td>{{ assessment.validationDate|date:'mediumDate' }}</td>
        </tr>
      </table>
    </mat-tab>

    <mat-tab label="Informations complémentaires">
     <h2>Situation actuelle</h2>
     <table>
       <tr>
         <th>Dernière mise à jour</th>
         <th>Type du contrat</th>
         <th>Durée du contrat (mois)</th>
         <th>Commentaire (nom de l'entreprise)</th>
       </tr>
       <tr>
         <td>{{ candidate.feedback.updatedAt }}</td>
         <td>{{ candidate.feedback.typeOfContract }}</td>
         <td>{{ candidate.feedback.durationOfContract }}</td>
         <td>{{ candidate.feedback.comment }}</td>
       </tr>
     </table>
     <div>
        <h3>Infos supplémentaires</h3>
         <ul>
           <li>Avis sur le candidat: {{ candidate.rankingCandidate }}</li>
           <li>Commentaire: {{ candidate.commentary }}</li>
           <!-- <li>Statut actuel: {{ candidate.statusCandidate }}</li> -->
        </ul>
      </div>
    </mat-tab>

  </mat-tab-group>
</ng-container>
