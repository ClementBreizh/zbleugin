<ng-container *ngIf="candidate">
  <h2>{{ candidate.sexCandidate }} {{candidate.firstname}} {{candidate.lastname}}</h2>
  <p class="status">Statut actuel: {{ candidate.statusCandidate }}</p>

  <div class="card row z-depth-1">
    <div class="col s5 offset-s1">
      <mat-list>
        <mat-list-item class="address" >Adresse:</mat-list-item>
        <mat-list-item >{{candidate.address.street}}</mat-list-item>
        <mat-list-item >{{candidate.address.postalCode}} {{candidate.address.city}}</mat-list-item>
      </mat-list>
    </div>
    <div class="col s5 offset-s1">
      <mat-list>
        <mat-list-item class="contact" >Contact:</mat-list-item>
        <mat-list-item >Tel mobile: {{candidate.homePhone}}</mat-list-item>
        <mat-list-item >Tel fixe: {{candidate.cellPhone}}</mat-list-item>
        <mat-list-item >Email: {{candidate.email}}</mat-list-item>
      </mat-list>
    </div>
  </div>

  <mat-tab-group>
    <mat-tab label="Diplômes et matières maitrîsées"  class="left-align">
      <mat-card class="detailsCard1">
        <h3  class="left-align">Ses diplômes</h3>
        <table>
          <tr>
            <th>Intitulé</th>
            <th>Niveau</th>
            <th>Date d'obtention</th>
          </tr>
          <tr *ngFor="let degree of candidate.degrees">
            <td>{{ degree.name }}</td>
            <td>{{ degree.level }}</td>
            <td>{{ degree.validationDate }}</td>
          </tr>
        </table>
        <h3 class="left-align">Les matières maitrisées</h3>
        <ul>
          <li *ngFor="let matter of candidate.matters">{{ matter.name }}</li>
        </ul>
      </mat-card>
    </mat-tab>

    <mat-tab label="Session(s)">
        <h3 class="left-align">Ses sessions de formation</h3>
        <div *ngIf="actualSession; else noSession">
          <p>Sa dernière session est {{actualSession.name}}</p>
          <p>Elle se déroule du {{actualSession.startDate | date:'mediumDate' }} au {{actualSession.endDate | date:'mediumDate' }}</p>
          <mat-expansion-panel>
            <mat-expansion-panel-header>
              <mat-panel-title>
                Voir les autres sessions
              </mat-panel-title>
            </mat-expansion-panel-header>
            <ng-container *ngIf="this.candidate.sessions.length > 1">
              <p *ngFor="let session of this.candidate.sessions ">
                {{session.name}}
              </p>
            </ng-container>
          </mat-expansion-panel>
        </div>
        <ng-template #noSession>Aucune session actuellement</ng-template>
      </mat-tab>

    <mat-tab label="Rendez-vous">
      <mat-card class="rdv">
        <h3 class="left-align">Ses Rendez-vous</h3>
        <table>
          <tr>
            <th>Date du rendez-vous</th>
            <th>Statut</th>
            <th>Type du rendez-vous</th>
            <th>Organisateur</th>
          </tr>
          <tr *ngFor="let appointment of candidate.appointments">
            <td>{{ appointment.appointmentDate}}</td>
            <td>{{ appointment.status }}</td>
            <td>{{ appointment.appointmentType }}</td>
            <td>{{ appointment.organizer.firstname }} {{ appointment.organizer.lastname }}</td>
          </tr>
        </table>
      </mat-card>
    </mat-tab>

    <mat-tab label="Tests">
      <h3 class="left-align">Tests réalisés</h3>
      <table>
        <tr>
          <th>Thème</th>
          <th>Score</th>
          <th>Date de validation</th>
        </tr>
        <tr *ngFor="let assessment of candidate.assessments">
          <td>{{ assessment.category }}</td>
          <td>{{ assessment.score }}</td>
          <td>{{ assessment.validationDate|date:'mediumDate' }}</td>
        </tr>
      </table>
    </mat-tab>

    <mat-tab label="Informations complémentaires">
     <h3 class="left-align">Situation actuelle</h3>
     <table>
       <tr>
         <th>Dernière mise à jour</th>
         <th>Type du contrat</th>
         <th>Durée du contrat (mois)</th>
         <th>Commentaire (nom de l'entreprise)</th>
       </tr>
       <tr>
         <td>{{ candidate.feedback.updatedAt }}</td>
         <td>{{ candidate.feedback.typeOfContract }}</td>
         <td>{{ candidate.feedback.durationOfContract }}</td>
         <td>{{ candidate.feedback.comment }}</td>
       </tr>
     </table>
     <div>
        <h3 class="left-align">Infos supplémentaires</h3>
         <ul>
           <li>Avis sur le candidat: {{ candidate.ranking }}</li>
           <li>Commentaire: {{ candidate.commentary }}</li>
           <!-- <li>Statut actuel: {{ candidate.statusCandidate }}</li> -->
        </ul>
      </div>
    </mat-tab>

  </mat-tab-group>
</ng-container>
